(function(q){var t=window.AmazonUIPageJS||window.P,m=t._namespace||t.attributeErrors,h=m?m("BuyBackAssets",""):t;h.guardFatal?h.guardFatal(q)(h,window):h.execute(function(){q(h,window)})})(function(q,t,m){q.when("A","ready","BBPageState","bbMetric").register("buyback-util",function(h,p,e,c){function n(a){var b=a%10;10<=a&&(b+=n(Math.floor(a/10)));return b}var b=h.$;e.init();var k=e.get();return{hide:function(){for(var a=0;a<arguments.length;a++)b("#"+arguments[a]).removeClass("show").addClass("hide")},
show:function(){for(var a=0;a<arguments.length;a++)b("#"+arguments[a]).removeClass("hide").addClass("show")},hideInline:function(){for(var a=0;a<arguments.length;a++)null!==b("#"+arguments[a])&&b("#"+arguments[a]).addClass("hide")},showInline:function(){for(var a=0;a<arguments.length;a++)null!==b("#"+arguments[a])&&b("#"+arguments[a]).removeClass("hide")},isValidBuyBackIMEI:function(){var a=b("#buyBackIMEITextInput").val(),g=0,f;if(15!==a.length||-1!==a.indexOf("."))return!1;a=Number(b("#buyBackIMEITextInput").val());
if(isNaN(a))return!1;for(var c=15;1<=c;c--)f=a%10,0===c%2&&(f*=2),g+=n(f),a=Math.floor(a/10);return 0===g%10?!0:!1},getFormattedPrice:function(a,b){"undefined"===typeof b&&(b=!1);a=a.toFixed(2);var f=Math.floor(a),c="";b?0<a.indexOf(".")&&f!=a&&(c=a.substring(a.indexOf("."),a.length)):0<a.indexOf(".")&&(c=a.substring(a.indexOf("."),a.length));f=f.toString();a=f.substring(f.length-3);f=f.substring(0,f.length-3);""!==f&&(a=","+a);return f.replace(/\B(?=(\d{2})+(?!\d))/g,",")+a+c},applyBuyBackOffer:function(a){var g=
!1,f={type:"post",url:"/gp/product/features/buyback/buyBackDiscountHandler.html?"+b.param({asin:a.asin,category:a.buyBackCategory,currencyCode:a.currencyCode,postalCode:a.postalCode,sellerId:a.sellerId,categoryIdentifier:a.categoryIdentifier,productPrice:a.buyBoxOfferBuyingPrice,buyBackOfferId:a.selectedBuyBackOfferData.offerId,isGepEligible:a.selectedBuyBackOfferData.gepEligibleBrandModel?1:0,discountValue:a.selectedBuyBackOfferData.discountPrice||(a.selectedBuyBackOfferData.gepEligibleBrandModel?
1:0),feeAsin:a.feeAsin,convenienceFee:a.convenienceFee}),async:!1,success:function(f){var b;try{b=JSON.parse(f)}catch(c){g=!1}"undefined"!==typeof b&&"SUCCESS"===b.status&&(g=!0,a.totalSponsoredValue=b.sponsoredDiscount,a.purchaseHistoryDiscount=b.purchaseHistoryDiscount,h.state("AdditionalSweetener",{sweetener:b.valueMatchingSweetener}))},error:function(){g=!1}};b.ajax(f);h.trigger("BUYBACK_DISCOUNT_HANDLER_FOR_DFL",g);return g},updateBestBuyBackOfferForCategory:function(a){var c=!1,f={type:"post",
url:"/gp/product/features/buyback/buyBackOffersForCategory.html?"+b.param({encryptedMarketPlaceId:a.encryptedMarketPlaceId,asin:a.asin,productPrice:a.productPrice,brand:a.brand,subCategoryName:a.subCategoryName,encryptedMerchantId:a.sellerId,postalCode:a.postalCode,buyBackCategory:a.categoryChosen,rbnHierarchyNodes:a.productCategory}),async:!1,success:function(f){var b;try{b=JSON.parse(f)}catch(e){c=!1}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(c=!0,a.buyBackExchangeItems="",""!==b.BestBuyBackOffer&&
null!==b.BestBuyBackOffer&&(f=JSON.parse(b.BestBuyBackOffer),a.buyBackExchangeItems=f.containedBuyBackProductNodes),a.buyBackCategory=b.BuyBackCategory,a.buyBackprompt1Text=b.Option1PromptText,a.buyBackprompt2Text=b.Option2PromptText,a.buyBackprompt3Text=b.Option3PromptText)},error:function(){c=!1}};b.ajax(f);return c},validateBrandAndModelBasedOnIMEI:function(a){var c={asin:a.asin,imeiNumber:a.imeiNumber,brand:a.selectedBuyBackOptions[0],model:a.selectedBuyBackOptions[1],category:a.buyBackCategory.toLowerCase(),
sellerId:a.sellerId,isGepEligible:a.selectedBuyBackOfferData.gepEligibleBrandModel?1:0,totalBuyBackDiscount:a.selectedBuyBackOfferData.discountPrice+a.totalSponsoredValue,productPrice:a.productPrice},f="FAILED",c={type:"post",url:"/gp/product/features/buyback/verifyIMEIHandler.html?"+b.param(c),async:!1,success:function(b){var c;try{c=JSON.parse(b)}catch(g){f="FAILED"}"undefined"!==typeof c&&"SUCCESS"===c.status?(f="SUCCESS",a.gepDiscountValue=c.gepDiscountValue,a.discountAppliedText=c.discountAppliedText,
a.gepSuccessNoteText=c.gepSuccessNoteText,a.gepFailureNoteText=c.gepFailureNoteText,a.gepStatusCode=c.gepStatusCode):"undefined"!==typeof c&&"MISMATCH"===c.status?f="MISMATCH":"undefined"!==typeof c&&"BLOCK"===c.status&&(f="BLOCK")},error:function(){f="FAILED"}};b.ajax(c);h.trigger("VALIDATE_IMEI_FOR_DFL",f,a);return f},setSelectedBuyBackOffer:function(a){var c=!0;b.each(a.buyBackExchangeItems,function(f,e){if(("C"===a.furnitureWeblabTreatment||1<a.noOfQuestions)&&e.header===a.selectedBuyBackOptions[0])b.each(e.containedBuyBackProductNodes,
function(f,e){if(e.header===a.selectedBuyBackOptions[1]){if(""===a.selectedBuyBackOptions[2]&&null!==e.buyBackProductDetails)return a.selectedBuyBackOfferData=e.buyBackProductDetails.buyBackOfferDetailsList[0],c=!1;b.each(e.containedBuyBackProductNodes,function(f,b){if(b.header===a.selectedBuyBackOptions[2]&&null!==b.buyBackProductDetails)return a.selectedBuyBackOfferData=b.buyBackProductDetails.buyBackOfferDetailsList[0],c=!1})}});else if(1===a.noOfQuestions&&e.header===a.selectedBuyBackOptions[0]){if(null!==
e.buyBackProductDetails)return a.selectedBuyBackOfferData=e.buyBackProductDetails.buyBackOfferDetailsList[0],c=!1;b.each(e.containedBuyBackProductNodes,function(f,b){if(b.header===a.selectedBuyBackOptions[2]&&null!==b.buyBackProductDetails)return a.selectedBuyBackOfferData=b.buyBackProductDetails.buyBackOfferDetailsList[0],c=!1})}return c});return c},auiNewPageStateParseLogicBuyBack:function(){var a=h.parseJSON,c=["buyBackPageState"];h.each(b('script[type\x3d"a-state"]'),function(f){f=b(f);if(!f.data("a-eval")){var e=
f.attr("data-a-state");if(e&&(e=a(e),e.key&&-1!==b.inArray(e.key,c))){var u=a(f.html());h.state.replace(e.key,u);f.data("a-eval",!0)}}})},getSponsoredDiscount:function(a,c,f,e){var u=0;a={type:"post",url:"/gp/product/features/buyback/buyBackAjaxHandler.html?"+b.param({asin:a.asin,category:a.buyBackCategory,currencyCode:a.currencyCode,postalCode:a.buyBackPostalCode,sellerId:a.sellerId,categoryIdentifier:a.categoryIdentifier,productPrice:a.buyBoxOfferBuyingPrice,buyBackOfferId:c,discountValue:f,imeiNumber:e,
brand:a.deviceBrandName,modelId:a.deviceModelId,feeAsin:a.feeAsin,convenienceFee:a.convenienceFee}),async:!1,success:function(a){var f;try{f=JSON.parse(a)}catch(b){u=0}"undefined"!==typeof f&&"SUCCESS"===f.status&&(u=f.sponsoredDiscount)},error:function(){u=0}};b.ajax(a);return u},getMaxDiagnosticsDiscount:function(a,c){a="/gp/product/features/buyback/buyBackDiagnosticOffer.html?"+b.param({sessionId:a.dpSessionId,asin:a.asin,diagnosticRunId:c,productPrice:a.buyBoxOfferBuyingPrice});var f=0;if(!c||
0===c.length)return f;b.ajax({type:"post",url:a,async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(c){f=0}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(f=b)},error:function(){f=0}});return f},getModelNameFromModelId:function(a,c){var f="";a={type:"post",url:"/gp/product/features/buyback/diagnosticMobileModelName.html?"+b.param({mobileModelId:c+"_"+a}),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(c){f=""}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(f=b)},
error:function(){f=""}};b.ajax(a);return f},updateCustomerdata:function(a,c,f,e){var k=!1;a={type:"post",url:"/gp/product/features/buyback/updateBuyBackCustomerDataBySession.html?"+b.param({sessionId:a.dpSessionId,asin:a.asin,buyBackData:c,sponsoredOffers:f,diagnosticOffer:e}),async:!1,success:function(a){var b;try{b=JSON.parse(a)}catch(f){k=!1}"undefined"!==typeof b&&"SERVICE-SUCCESS"===b.status&&(k=!0)},error:function(){k=!1}};b.ajax(a);return k},fetchDeviceCheckRejectWeblabTreatment:function(){var a=
"C";b.ajax({type:"get",url:"/gp/product/features/buyback/buyBackDeviceCheckWeblabTrigger.html",async:!1,success:function(b){var f;try{f=JSON.parse(b)}catch(e){c.increment("BuyBack:buyBackDeviceCheckWeblabTrigger:jsonParse:count")}"undefined"!==typeof f&&"SUCCESS"===f.status&&(a=f.deviceCheckRejectWeblab,c.increment("BuyBack:deviceCheckRejectWeblab:success:count"))},error:function(){c.increment("BuyBack:deviceCheckRejectWeblab:error:count")}});return a},checkBuyBackAccordionRequest:function(a){return"undefined"===
typeof a||"BB"===a?!0:!1},checkValidDeviceCheckRequest:function(a,b,f){return"DFL"===a||this.checkBuyBackAccordionRequest(a)&&("C"===b||f)?!0:!1},checkDeviceCheckScreenAvailability:function(a,b){return"T1"!==a||"mobile"!==b&&"Mobile"!==b?!1:!0},setBuyBackDeviceCheckScreenImages:function(){for(var b=["https://m.media-amazon.com/images/G/31/buyback/device_check_screen/1.jpg","https://m.media-amazon.com/images/G/31/buyback/device_check_screen/2.jpg","https://m.media-amazon.com/images/G/31/buyback/device_check_screen/3.jpg",
"https://m.media-amazon.com/images/G/31/buyback/device_check_screen/4.jpg"],c=document.getElementsByClassName("device-check-image-container").length,f=b.length,e=0;e<c;e++){var k=b[e%f];document.getElementsByClassName("device-check-image-container")[e].childNodes[1].getElementsByClassName("device-check-image")[0].setAttribute("src",k)}},setBuyBackExchangeTip:function(b,c,f){this.checkValidDeviceCheckRequest(b,c,f)&&(b=localStorage.getItem("deviceCheckRejectWeblabTreatment"),"T1"===k.deviceCheckWeblabAllocation&&
"T1"===b?(this.hide("buybackMobileExchangeTipT1Treatment","buybackMobileExchangeTipT2Treatment","buybackMobileExchangeTip"),this.show("buybackMobileExchangeTipT1Treatment"),this.setBuyBackDeviceCheckScreenImages()):"T1"===k.deviceCheckWeblabAllocation&&"T2"===b?(this.hide("buybackMobileExchangeTipT1Treatment","buybackMobileExchangeTipT2Treatment","buybackMobileExchangeTip"),this.show("buybackMobileExchangeTipT2Treatment"),this.setBuyBackDeviceCheckScreenImages()):"T1"===k.deviceCheckWeblabAllocation&&
(this.hide("buybackMobileExchangeTipT1Treatment","buybackMobileExchangeTipT2Treatment","buybackMobileExchangeTip"),this.show("buybackMobileExchangeTip")))}}});"use strict";q.when("A","a-button","a-dropdown","buyback-util","BBPageState","bbMetric","gep-util","buyBackPageStateStatic").execute(function(h,p,e,c,n,b,k){function a(b){var a={inlineContent:d.selectOldProductDetailsToolTipText,position:"triggerBottom"};q.when("A","jQuery").execute(function(f,c){f.declarative.create(c("#"+b),"a-tooltip",a)})}
function g(b){q.when("A","jQuery").execute(function(a,f){a.declarative.remove(f("#"+b),"a-tooltip")})}function f(b){""!==b&&null!==e.getSelect(l('[id\x3d"'+b+'"]'))&&e.getSelect(l('[id\x3d"'+b+'"]')).setValue("")}function v(){var a=n.callBBPageState?n.getUpdatedState():h.state("buyBackPageState");l.isEmptyObject(a)||(d.selectOldProductDetailsToolTipText=a.selectOldProductDetailsToolTipText,d.productCategory=a.buyBackCategory,d.buyBackCategory=a.buyBackCategory,d.enableRefactoring=a.enableRefactoring,
d.buyBackprompt1Text=a.buyBackDropDown1prompt,d.buyBackprompt2Text=a.buyBackDropDown2prompt,d.buyBackprompt3Text=a.buyBackDropDown3prompt,d.categoryIdentifier=a.categoryIdentifier,d.buyBackExchangeItems=a.buyBackExchangeItems,d.currencyCode=a.currencyCode,d.buyBackMobile=a.buyBackMobile,d.buyBoxOfferBuyingPrice=Number(a.buyBoxOfferBuyingPrice),d.convenienceFee="",a.convenienceFee!==m?d.convenienceFee=Number(a.convenienceFee):(b.increment("BuyBack:web:noConvenienceFeeConfigured:count"),d.convenienceFee=
0),d.feeAsin="",a.feeAsin!==m&&(d.feeAsin=a.feeAsin),d.asin=a.asin,d.sellerId=a.sellerId,d.brand=a.brand,d.subCategoryName=a.subCategoryName,d.postalCode=a.buyBackPostalCode,d.encryptedMarketPlaceId=a.marketPlaceId,d.productPrice=a.productPrice,d.crossCategoryOfferAvailable=a.crossCategoryOfferAvailable,d.convenienceFeeWeblabAllocation=a.convenienceFeeWeblabAllocation,d.dpFeeStringTextEnabled=a.dpFeeStringTextEnabled,d.feeMap=a.feeMap,d.noOfQuestions=a.noOfQuestions,d.furnitureWeblabTreatment=a.furnitureWeblabTreatment,
d.audioWeblabTreatment=a.audioWeblabTreatment,d.gepEligible=a.gepEligibleCustomer)}function u(){p("#buyBackBuyNowButton").enable();g("buyBackBuyNowToolTip")}function r(){p("#buyBackBuyNowButton").disable();a("buyBackBuyNowToolTip")}function z(){var a=d.buyBoxOfferBuyingPrice-(d.selectedBuyBackOfferData.discountPrice+d.totalSponsoredValue+d.purchaseHistoryDiscount);if("T1"===d.convenienceFeeWeblabAllocation)if(""===d.convenienceFee)B();else{var b=Number(d.convenienceFee),a=a+b;l("#isBuyBackFee")[0]===
m?A():t();!0===d.dpFeeStringTextEnabled&&l("#convenienceFeeCharge").text(b)}a=c.getFormattedPrice(a);l("#priceAfterBuyBackDiscount").text(a)}function A(){l("#buyBackBuyNow").append('\x3cinput type\x3d"hidden" id\x3d"isBuyBackKey" name\x3d"custom-name.2.1" value\x3d"UNIQ-buyBack"\x3e\x3cinput type\x3d"hidden" id\x3d"isBuyBackFee" name\x3d"custom-value.2.1" value\x3d"BuyBackFee"\x3e')}function t(){l("#isBuyBackKey").val("UNIQ-buyBack");l("#isBuyBackFee").val("BuyBackFee")}function B(){l("#feeAsin")[0]!==
m&&l("#feeAsin")[0].value!==m&&l("#feeAsin").val("");l("#feeOfferingId")[0]!==m&&l("#feeOfferingId")[0].value!==m&&l("#feeOfferingId").val("");l("#isBuyBackKey")[0]!==m&&l("#isBuyBackKey")[0].value!==m&&l("#isBuyBackKey").val("");l("#isBuyBackFee")[0]!==m&&l("#isBuyBackFee")[0].value!==m&&l("#isBuyBackFee").val("")}function w(a){b.increment("BuyBack:web:discountApply:count");r();var e=d.selectedBuyBackOfferData.gepEligibleBrandModel;b.startTimer("BuyBack:web:ajaxSave");var g=c.applyBuyBackOffer(d);
b.stopTimer("BuyBack:web:ajaxSave");if(g){a=d.selectedBuyBackOfferData.discountPrice+d.totalSponsoredValue+d.purchaseHistoryDiscount;var g=h.state("AdditionalSweetener"),v=0;l.isEmptyObject(g)||(v=g.sweetener);g=d.totalSponsoredValue-v;l("#buyBackDiscountPrice").text(c.getFormattedPrice(a));l("#buyBackSponsoredDiscount").text(c.getFormattedPrice(g));0<g?c.show("buyBackSponsoredDiscountText"):c.hide("buyBackSponsoredDiscountText");!0===d.dpFeeStringTextEnabled&&""!==d.convenienceFee&&c.show("buyBackConvenienceFeeTextSection");
c.show("buyBackOfferAppliedSuccess","buyBackOfferAppliedSuccessText","priceAfterBuyBackDiscountSection","buyBackDetailsVerifyText","buyBackTermsAndConditions");c.hide("buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection","buyBackServiceFailedAlert");z();d.buyBackCategory.toLowerCase()!==d.buyBackMobile.toLowerCase()?u():(e?(c.show("buyBackIMEISection"),k.showGEPInfoDiv(d)):c.show("buyBackIMEISection","buyBackVerifyIMEIText"),c.hide("buyBackTermsAndConditions","buyBackIMEIUpdate"));b.increment("BuyBack:web:dataSaveSuccess:count")}else e?
k.showGEPDivsWhenRegularExchangeNotPresent():(b.increment("BuyBack:web:dataSaveFailed:count"),c.show("buyBackServiceFailedAlert","buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection"),c.hide("buyBackDetailsVerifyText","buyBackOfferAppliedSuccess","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackIMEISection","buyBackConvenienceFeeTextSection"),f(a))}function C(){h.on("a:dropdown:select",function(a){"buyBackDropDown0"===a.name?y():"buyBackDropDown1"===a.name?(b.increment("BuyBack:web:dropDown1Select:count"),
c.hide("buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackExchangeMightBeEligibleText","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection"),l(".buyBackGEPCustomer").removeClass("show").addClass("hide"),d.selectedBuyBackOptions[0]=l("#buyBackDropDown1").val(),c.show("buyBackDropDowns2"),l('[id\x3d"'+
d.previousSelectedBuyBackOptions[0]+'Id"]').removeClass("show").addClass("hide"),l('[id\x3d"'+d.selectedBuyBackOptions[0]+'Id"]').removeClass("hide").addClass("show"),"tv"===d.buyBackCategory.toLowerCase()&&c.show("buyBackItemWorkingConditionText"),c.show("buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection"),d.categoryChosen.toLowerCase()===d.buyBackMobile?c.hide("buyBackDropDown3"):c.show("buyBackDropDown3"),f(d.previousSelectedBuyBackOptions[0]),""!==d.previousSelectedBuyBackOptions[1]&&
(a=d.previousSelectedBuyBackOptions[0]+d.previousSelectedBuyBackOptions[1],l('[id\x3d"'+a+'Id"]').removeClass("show").addClass("hide"),f(a)),d.previousSelectedBuyBackOptions[0]=d.selectedBuyBackOptions[0],"T1"!==d.furnitureWeblabTreatment||1!==d.noOfQuestions||c.setSelectedBuyBackOffer(d)?r():w(d.selectedBuyBackOptions[0])):a.name===l("#buyBackDropDown1").val()?(b.increment("BuyBack:web:dropDown2Select:count"),d.selectedBuyBackOptions[1]=l('[id\x3d"'+d.selectedBuyBackOptions[0]+'"]').val(),c.hide("buyBackExchangeMightBeEligibleText"),
l(".buyBackGEPCustomer").removeClass("show").addClass("hide"),"T1"!==d.audioWeblabTreatment||2!==d.noOfQuestions||c.setSelectedBuyBackOffer(d)?(r(),d.buyBackCategory.toLowerCase()===d.buyBackMobile.toLowerCase()?(c.hide("buyBackDropDown3","buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackIMEIUpdateText","buyBackCollectOldProductDetailsText","buybackImeiBlockAlert"),c.show("buyBackHowToGetIMEI","buyBackIMEISection","buyBackDetailsVerifyText"),l("#buyBackIMEITextInput").removeClass("a-form-error"),
l("#buyBackIMEITextInput").val(""),c.setSelectedBuyBackOffer(d)||w(d.selectedBuyBackOptions[0])):(c.hide("buyBackOfferAppliedSuccess","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackValidIMEIAlert","buyBackIMEIMismatchAlert","buyBackIMEIUpdateText","buyBackDropDown3","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection"),c.show("buyBackCollectOldProductDetailsText","maxBuyBackDiscountSection","buyBackDropDowns3"),""!==
d.previousSelectedBuyBackOptions[1]&&(a=d.previousSelectedBuyBackOptions[0]+d.previousSelectedBuyBackOptions[1],l('[id\x3d"'+a+'Id"]').removeClass("show").addClass("hide"),f(a)),l('[id\x3d"'+d.selectedBuyBackOptions[0]+d.selectedBuyBackOptions[1]+'Id"]').removeClass("hide").addClass("show"),d.previousSelectedBuyBackOptions[1]=d.selectedBuyBackOptions[1])):w(d.selectedBuyBackOptions[0])):a.name===d.selectedBuyBackOptions[0]+d.selectedBuyBackOptions[1]&&(b.increment("BuyBack:web:dropDown3Select:count"),
c.hide("buyBackExchangeMightBeEligibleText"),l(".buyBackGEPCustomer").removeClass("show").addClass("hide"),d.selectedBuyBackOptions[2]=l('[id\x3d"'+d.selectedBuyBackOptions[0]+d.selectedBuyBackOptions[1]+'"]').val(),c.setSelectedBuyBackOffer(d)||w(d.selectedBuyBackOptions[0]+d.selectedBuyBackOptions[1]))});l("#buyBackIMEITextInput").bind("change input",function(){b.increment("BuyBack:web:imeiInput:count");c.hide("buyBackValidIMEIAlert","buyBackIMEIUpdate","buyBackServiceFailedAlert","buyBackTermsAndConditions",
"buyBackIMEIMismatchAlert","buybackImeiBlockAlert","buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes");c.show("buyBackHowToGetIMEI","buyBackVerifyIMEIText","buyBackOfferAppliedSuccess");l("#buyBackIMEITextInput").removeClass("a-form-error");k.showGEPInfoDiv(d);r()});l("#buyBackApplyButton").unbind("click").click(function(){b.increment("BuyBack:web:apply:count");d.imeiNumber=l("#buyBackIMEITextInput").val();if(c.isValidBuyBackIMEI()){d.gepEligible=k.gepEligibleCustomer?1:0;var a=c.validateBrandAndModelBasedOnIMEI(d);
if("FAILED"===a)b.increment("BuyBack:web:imeiServiceFailed:count"),r(),c.show("buyBackServiceFailedAlert","buyBackVerifyIMEIText"),c.hide("buyBackTermsAndConditions","buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackIMEIUpdate","buybackImeiBlockAlert","buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),k.showGEPInfoDiv(d);else if("MISMATCH"===a)b.increment("BuyBack:web:imeiMismatch:count"),r(),l("#buyBackIMEITextInput").addClass("a-form-error"),c.show("buyBackIMEIMismatchAlert","buyBackVerifyIMEIText"),
c.hide("buyBackTermsAndConditions","buyBackServiceFailedAlert","buyBackValidIMEIAlert","buyBackIMEIUpdate","buybackImeiBlockAlert","buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),k.showGEPInfoDiv(d);else if("BLOCK"===a)b.increment("BuyBack:web:imeiBlock:count"),r(),l("#buyBackIMEITextInput").addClass("a-form-error"),c.show("buybackImeiBlockAlert","buyBackVerifyIMEIText"),c.hide("buyBackTermsAndConditions","buyBackServiceFailedAlert","buyBackValidIMEIAlert","buyBackIMEIUpdate","buyBackIMEIMismatchAlert",
"buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),k.showGEPInfoDiv(d);else if("SUCCESS"===a)if(b.increment("BuyBack:web:correctIMEI:count"),c.hide("buyBackHowToGetIMEI","buyBackVerifyIMEIText","buyBackGEPIMEIInfoAlert","buyBackIMEIMismatchAlert","buyBackValidIMEIAlert","buyBackServiceFailedAlert","buybackImeiBlockAlert"),u(),d.selectedBuyBackOfferData.gepEligibleBrandModel)if(k.showGEPDivPostIMEIValidation(d),d.gepDiscountValue){a=d.buyBoxOfferBuyingPrice-d.gepDiscountValue;if("T1"===d.convenienceFeeWeblabAllocation)if(""===
d.convenienceFee)B();else{var f=Number(d.convenienceFee),a=a+f;l("#isBuyBackFee")[0]===m?A():t();!0===d.dpFeeStringTextEnabled&&l("#convenienceFeeCharge").text(f)}a=c.getFormattedPrice(a);l("#priceAfterBuyBackDiscount").text(a);c.hide("maxBuyBackDiscountSection");c.show("priceAfterBuyBackDiscountSection")}else z();else 11===d.gepStatusCode?(b.increment("BuyBack:GEP:gepNotEligibleDueToCustomerNotLoggedIn:count"),l("#buyBackGEPNotEligibleAlert").html(d.gepFailureNoteText),c.hide("buyBackGEPIMEISuccessAlert"),
c.show("buyBackGEPNotEligibleAlert","buyBackOfferAppliedSuccess","buyBackTermsAndConditions")):(c.hide("buyBackGEPNotEligibleAlert","buyBackOfferAppliedSuccess"),c.show("buyBackIMEIUpdate","buyBackTermsAndConditions"))}else l("#buyBackIMEITextInput").addClass("a-form-error"),c.hide("buyBackGEPNotEligibleAlert","buyBackOfferAppliedSuccess","buyBackIMEIUpdate","buyBackTermsAndConditions","buyBackServiceFailedAlert","buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),c.show("buyBackValidIMEIAlert",
"buyBackHowToGetIMEI","buyBackVerifyIMEIText"),k.showGEPInfoDiv(d),r()})}function D(a,b,f,c,d){if("undefined"===typeof b)return"";var e="\x3cspan class\x3d'a-dropdown-container'\x3e\x3cselect name\x3d'"+c+f+"' id\x3d'"+c+f+"' tabindex\x3d'-1' class\x3d'a-native-dropdown a-button-span12 a-spacing-none'\x3e\x3coption class\x3d'a-prompt' value\x3d''\x3e"+d+"\x3c/option\x3e";l.each(b,function(a,b){e=e+"\x3coption value\x3d'"+b.header+"'\x3e"+b.header+"\x3c/option\x3e"});return e=e+"\x3c/select\x3e\x3cspan tabindex\x3d'-1' id\x3d'"+
c+f+"Id' class\x3d'a-button a-button-dropdown a-spacing-none a-button-span12 hide' \x3e\x3cspan class\x3d'a-button-inner'\x3e\x3cspan class\x3d'a-button-text a-declarative' data-action\x3d'a-dropdown-button' role\x3d'button' tabindex\x3d'0'\x3e\x3cspan class\x3d'a-dropdown-prompt'\x3e"+d+"\x3c/span\x3e\x3c/span\x3e\x3ci class\x3d'a-icon a-icon-dropdown'\x3e\x3c/i\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e"}function x(){if("undefined"!==typeof d.buyBackExchangeItems){var a="",b="";l.each(d.buyBackExchangeItems,
function(f,c){a+=D(f,c.containedBuyBackProductNodes,c.header,"",d.buyBackprompt2Text);var e=c.header;l.each(c.containedBuyBackProductNodes,function(a,f){b+=D(a,f.containedBuyBackProductNodes,f.header,e,d.buyBackprompt3Text)})});l("#buyBackDropDowns2").html(a);l("#buyBackDropDowns3").html(b)}}function E(){if("undefined"!==typeof d.buyBackExchangeItems&&""!==d.buyBackExchangeItems){e.getSelect("buyBackDropDown1").getOptions().remove();e.getSelect("buyBackDropDown1").addOptions(F(d.buyBackExchangeItems));
var a=d.buyBackprompt1Text;e.getSelect("buyBackDropDown1").update({option_prompt:a});q.when("A").execute(function(a){a.$("#buyBackDropDown1Id").show()});c.show("buyBackDropDown1Id","buyBackDropDowns1");("C"===d.furnitureWeblabTreatment||1<d.noOfQuestions)&&x()}}function F(a){var b=[];h.each(a,function(a){b.push({text:a.header,value:a.header})});return b}function y(){h.on("a:dropdown:select",function(a){if("buyBackDropDown0"===a.name){b.increment("BuyBack:web:dropDown0Select:count");b.startTimer("BuyBack:web:getBuyBackCrossCategoryOffers");
c.hide("buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buyBackDropDown3","buyBackValidIMEIAlert","buyBackIMEIUpdate","buyBackMobileWorkingConditionText","mobileExchangeNotAvailableAtPincode","buyBackItemWorkingConditionText","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection");c.show("buyBackCollectOldProductDetailsText",
"maxBuyBackDiscountSection");d.categoryChosen=l("#buyBackDropDown0").val();if("T1"===d.convenienceFeeWeblabAllocation){var f=d.productCategory.toLowerCase()+"_"+d.categoryChosen.toLowerCase();d.convenienceFee="";d.feeAsin="";d.feeMap===m?(a="BuyBack:web:noEntryExistsFor"+d.productCategory.toLowerCase()+":count",b.increment(a)):d.feeMap.map[f]===m?b.increment("BuyBack:web:noEntryExistsFor"+f+":count"):!0===d.feeMap.map[f].feeEnabled?(a=d.feeMap.map[f].asin,d.convenienceFee=d.feeMap.map[f].price,d.feeAsin=
a,f=d.feeMap.map[f].offeringId,l("#feeAsin").val(a),l("#feeOfferingId").val(f)):b.increment("BuyBack:web:feeDisabledFor"+f+":count")}d.selectedBuyBackOptions=["","",""];d.previousSelectedBuyBackOptions=["",""];a=c.updateBestBuyBackOfferForCategory(d);""===d.buyBackExchangeItems||!1===a?(b.increment("BuyBack:web:crossCategoryOfferNotAvailableStringShown:count"),b.startTimer("BuyBack:web:crossCategoryOfferNotAvailable"),d.buyBackExchangeItems="",c.hide("buyBackDropDowns1","buyBackDropDowns2","buyBackDropDowns3",
"buyBackSelectDropDown2Alert","buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buyBackDropDown1Id","buyBackCollectOldProductDetailsText","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection"),c.hide("buyBackCollectOldProductDetailsText"),c.show("mobileExchangeNotAvailableAtPincode"),r(),b.stopTimer("BuyBack:web:crossCategoryOfferNotAvailable")):
(d.categoryChosen.toLowerCase()===d.buyBackMobile&&(c.hide("buyBackDropDown3"),c.show("buyBackMobileWorkingConditionText")),"tv"===d.categoryChosen.toLowerCase()&&c.show("buyBackItemWorkingConditionText"),e.getSelect("buyBackDropDown1").update({option_prompt:d.buyBackprompt1Text}),b.stopTimer("BuyBack:web:getBuyBackCrossCategoryOffers"));""!==d.buyBackExchangeItems&&E()}})}var l=h.$,d={selectedBuyBackOptions:["","",""],previousSelectedBuyBackOptions:["",""],imeiNumber:"",totalSponsoredValue:0,purchaseHistoryDiscount:0,
enableRefactoring:!1,categoryChosen:"",productCategoryToDbMapping:{tv:"TV",refrigerator:"Refrigerator",laptop:"Laptop",washingmachine:"WashingMachine",tablet:"Tablet",ac:"AC"},bulkyCategories:"tv washingmachine refrigerator ac sofa coffeetable mattress wardrobe recliner shoerack tvunit studytable officechair bed".split(" ")};h.on("a:accordion:buybox-accordion:buyBackAccordionRow:select",function(a){b.increment("BuyBack:web:buyBackAccordionRow:select:count");l=h.$;a=document.getElementById("buyBackDropDown0");
var f=d.crossCategoryOfferAvailable;v();var e=l("#isSlotsAvailable").attr("value");-1<d.bulkyCategories.indexOf(d.buyBackCategory.toLowerCase())&&e!==m&&"false"===e?(b.increment("BuyBack:web:hnbFaddBuyBackSuppression:count"),b.startTimer("BuyBack:web:hnbFaddBuyBackSuppression"),l("#buyBackDropDowns3").parent().addClass("aok-hidden"),l("#buyBackDropDown0").parent().parent().addClass("aok-hidden"),c.hide("maxBuyBackDiscountSection","buyBackDropDowns1","buyBackDropDowns2","buyBackDropDowns3","buyBackSelectDropDown2Alert",
"buyBackDropDown2","buyBackOfferAppliedSuccess","buyBackIMEISection","buyBackDetailsVerifyText","buyBackTermsAndConditions","priceAfterBuyBackDiscountSection","buyBackServiceFailedAlert","buyBackIMEIMismatchAlert","buyBackDropDown1Id","buyBackCollectOldProductDetailsText","buybackImeiBlockAlert","buyBackConvenienceFeeTextSection"),c.show("mobileExchangeNotAvailableAtPincode"),p("#buyBackBuyNowButton").disable(),b.stopTimer("BuyBack:web:hnbFaddBuyBackSuppression")):f!==m&&null!==a&&"false"===d.crossCategoryOfferAvailable&&
(b.increment("BuyBack:web:mobileOffersNotAvailable:count"),d.productCategory.toLowerCase()!==d.categoryChosen.toLowerCase()&&(d.buybackCategory=d.productCategory,d.categoryChosen=d.productCategoryToDbMapping[d.productCategory],c.updateBestBuyBackOfferForCategory(d),("C"===d.furnitureWeblabTreatment||1<d.noOfQuestions)&&x()),c.hide("buyBackDropDowns0SectionId","buyBackDropDown0Id","buyBackDropDown0","mobileExchangeNotAvailableAtPincode","buyBackIMEISection"),c.show("buyBackDropDown1","buyBackDropDown1Id",
"buyBackDropDowns1"))});h.on("a2i_dpx:buyback:processBBPageState",function(){n.callBBPageState&&n.getUpdatedState();c.auiNewPageStateParseLogicBuyBack();v();y();("C"===d.furnitureWeblabTreatment||1<d.noOfQuestions)&&d.enableRefactoring&&x();C()});(function(){var a=l("#buyBackDropDown0").val();"undefined"!==typeof a&&""!==a&&f("buyBackDropDown0");a=l("#buyBackDropDown1").val();if("undefined"!==typeof a&&""!==a){var b=l('[id\x3d"'+a+'"]').val();f("buyBackDropDown1");"undefined"!==typeof b&&""!==b&&
(f(a),f(a+b))}})();v();y();("C"===d.furnitureWeblabTreatment||1<d.noOfQuestions)&&d.enableRefactoring&&x();C()});"use strict";q.when("A","ready").register("bbMetric",function(h){var p=t.ue,e={};return{increment:function(c){"undefined"!==typeof p&&"undefined"!==typeof p.count&&c&&p.count(c,(p.count(c)||0)+1)},stopTimer:function(c){"function"===typeof t.uet&&e.hasOwnProperty(c)&&(delete e[c],t.uet("be",c,{wb:1}),t.uex("ld",c,{wb:1}))},startTimer:function(c){"function"!==typeof t.uet||e.hasOwnProperty(c)||
(e[c]=1,t.uet("bb",c,{wb:1}))}}});"use strict";q.when("A","a-button","buyback-util","bbMetric","BBPageState","DiagnosticsState","Logger","gep-util","buyBackPageStateStatic").register("DiagnosticsUtils",function(h,p,e,c,n,b,k,a){k.log("DiagnosticsUtils file");var g=h.$;return{buyBackState:n.get(),setupNonAutoDetectAccordionRowCallback:null,startDiagnosticsFlow:function(){k.log("startDiagnosticsFlow");"function"!==typeof submitDiagnosticsForm&&(document.getElementById("backUrl").value=t.location.href,
document.getElementById("diagnosticsForm").submit())},getAndroidVersion:function(){k.log("getAndroidVersion");var a=navigator.userAgent.match(/Android[\/]*[\d\.]+/),b="0.0";null!==a&&null!==a[0]&&(a=a[0].split("/"),null!==a&&(b=a[1]));return parseFloat(b,10)},getAmazonAppVersion:function(){k.log("getAmazonAppVersion");var a=navigator.userAgent.match(/Amazon.com[\/]*[\d\.]+/),b="0.0";null!==a&&null!==a[0]&&(a=a[0].split("/"),null!==a&&(b=a[1]));return parseFloat(b.split(".")[0]+"."+b.split(".")[1],
10)},checkPhoneRootedAPI:function(){k.log("checkPhoneRootedAPI");t.cordova.require("cordova/exec")(this.phoneRootedCallbackSuccess.bind(this),this.phoneRootedCallbackError.bind(this),"MShopMobileAutoDiagnostic","isPhoneRooted",{})},runAutoDetectionAPI:function(){k.log("runAutoDetectionAPI");t.cordova.require("cordova/exec")(this.autoDetectCallback.bind(this),this.autoDetectCallback.bind(this),"MShopMobileAutoDiagnostic","getAutoDetectPhoneInfo",{})},triggerAutoClick:function(){k.log("triggerAutoClick");
var a=document.getElementById("buyBackAccordionRow");null!==a&&a!==m&&a.classList.contains("a-accordion-active")&&!1===b._clickedAlready&&(b._clickedAlready=!0,this.primaryAccordionClick())},triggerAutoClickAfterDiagnostics:function(){k.log("triggerAutoClickAfterDiagnostics");if("BB"===this.buyBackState.programName){c.increment("BuyBack:mobile:autoDiagnosticRunSuccess:count");var a=g("#buyBackAccordionRow a.a-accordion-row");null!==a&&0<a.length&&g(a)[0].click()}},primaryAccordionClick:function(){k.log("primaryAccordionClick");
e.hide("autoDetectionAccordion");e.hide("withAutoDetection-accordion","withoutAutoDetection-accordion");p("#buyBackBuyNowButton").disable();e.hide("buyBackConfirmButton");if("BB"===this.buyBackState.programName){g("#autoDetectionAccordion").show();this.setHiddenRowInElement(g("#withoutAutoDetection-accordion .a-accordion-inner"));var a=g("#withAutoDetection-accordion a.a-accordion-row");e.show("withAutoDetection-accordion","withoutAutoDetection-accordion");null!==a&&0<a.length&&g(a)[0].click();g("#diagnosticsSpinnerDiv").hide();
e.show("autoDetectionAccordion")}else this.runAutoDetection()},runAutoDetection:function(){k.log("runAutoDetection");b._androidVersion=this.getAndroidVersion();b._amazonAppVersion=this.getAmazonAppVersion();5>b._androidVersion?c.increment("BuyBack:mobile:autoDetectionFailedOldAppAndroid:count"):12.7>b._amazonAppVersion?c.increment("BuyBack:mobile:autoDetectionFailedOldAppAmazon:count"):a.isGEPEligibleCustomer(this.buyBackState)?(c.increment("BuyBack:mobile:autoDetectionSkippedGEPCustomer:count"),
b._shouldRunAutoDetect=!1,this.showAutoDetectionResult()):(g("#diagnosticsSpinnerDiv").show(),e.hide("autoDetectionAccordion"),this.checkPhoneRootedAPI(),this.runAutoDetectionAPI())},addAutoDetectDataToState:function(){k.log("addAutoDetectDataToState");this.buyBackState.imeiNumber=b._imeiNumber;this.buyBackState.deviceBrandName=b._deviceBrandName;this.buyBackState.deviceModelName=b._deviceModelName;this.buyBackState.deviceModelId=b._deviceModelId;n._buyBackState=this.buyBackState},showAutoDetectionResult:function(){k.log("showAutoDetectionResult");
if(b._shouldRunAutoDetect&&(!1===b._ranPhoneRooted||!1===b._ranAutoDetection))return!1;g("#diagnosticsSpinnerDiv").hide();e.show("autoDetectionAccordion");if(!1===b._shouldRunAutoDetect||!1===b._isAutoDetectSuccessfull||!0===b._isPhoneRooted)g("#buybackAccordion").remove(),this.setHiddenRowInElement(g("#hidden-accordion-content")),g("#hidden-accordion-content").removeClass("aok-hidden");else{c.increment("BuyBack:mobile:autoDetectionShown:count");this.setHiddenRowInElement(g("#withoutAutoDetection-accordion .a-accordion-inner"));
var a=g("#withAutoDetection-accordion a.a-accordion-row");e.show("withAutoDetection-accordion","withoutAutoDetection-accordion");this.addAutoDetectDataToState();null!==a&&0<a.length&&g(a)[0].click()}},setHiddenRowInElement:function(a){k.log("setHiddenRowInElement");if(("C"===this.buyBackState.soppWeblabTreatment||this.buyBackState.dflEligible)&&null!==b._lastHiddenElem&&0===g("#hidden-accordion-content").html().length)return!1;k.log("setHiddenRowInElement:"+a.selector);g("#hidden-accordion-content").html("");
b._lastHiddenElem=a;a.html(b._hiddenRowHTML);e.setBuyBackExchangeTip("BB",this.buyBackState.soppWeblabTreatment,this.buyBackState.dflEligible);this.setupNonAutoDetectAccordionRowCallback()},autoDetectCallback:function(a){k.log("autoDetectCallback");var g=!1;if(null===a.model||a.model===m)c.increment("BuyBack:mobile:autoDetectionFailedAPI:count"),k.log("BuyBack:mobile:autoDetectionFailedAPI:count"),g=!0;if(!g){var h=e.getModelNameFromModelId(a.model,a.brand).MobileModelName;null===h||h===m||""===h?
(c.increment("BuyBack:mobile:autoDetectionFailedModel:count"),k.log("BuyBack:mobile:autoDetectionFailedModel:count"),g=!0):null===a.imeiNumber||a.imeiNumber===m||""===a.imeiNumber?(c.increment("BuyBack:mobile:autoDetectionFailedIMEI:count"),k.log("BuyBack:mobile:autoDetectionFailedIMEI:count"),g=!0):(b._imeiNumber=a.imeiNumber,b._deviceBrandName=a.brand,b._deviceModelName=h,b._deviceModelId=a.model)}g||(a=this.setAutoDetectDiscount(b._deviceBrandName,b._deviceModelName),null!==a&&a!==m&&0!==a.discount)||
(c.increment("BuyBack:mobile:autoDetectionFailedDiscount:count"),k.log("BuyBack:mobile:autoDetectionFailedDiscount:count"),g=!0);b._ranAutoDetection=!0;b._isAutoDetectSuccessfull=!g;this.showAutoDetectionResult()},phoneRootedCallbackSuccess:function(a){k.log("phoneRootedCallbackSuccess");"true"===a.rootedStatus?(c.increment("BuyBack:mobile:autoDetectionFailedRooted:count"),b._isPhoneRooted=!0):b._isPhoneRooted=!1;b._ranPhoneRooted=!0;this.showAutoDetectionResult()},phoneRootedCallbackError:function(a){k.log("phoneRootedCallbackError");
b._isPhoneRooted=!1;b._ranPhoneRooted=!0;c.increment("BuyBack:mobile:phoneRootedAPIFailed:count");this.showAutoDetectionResult()},bindDiagnosticsFunctionality:function(a,m,u){k.log("bindDiagnosticsFunctionality");this.buyBackState="T1"!==m&&"T2"!==m||u?n.get():n.getUpdatedState();this.setupNonAutoDetectAccordionRowCallback=a;var r=this;b._hiddenRowHTML=g("#hidden-accordion-content").html();g("#hidden-accordion-content").html("");k.log("Cleared hidden html");if("T1"!==m&&"T2"!==m||u)h.on("a:accordion:buybox-accordion:buyBackAccordionRow:select",
function(a){g("#diagnosticsSpinnerDiv").show();e.hide("autoDetectionAccordion");b._clickedAlready=!0;r.primaryAccordionClick()});else g("#diagnosticsSpinnerDiv").show(),e.hide("autoDetectionAccordion"),b._clickedAlready=!0,r.primaryAccordionClick();g("#autoDiagnosticsIngress").click(function(){c.increment("BuyBack:mobile:runDiagnostic:click:count");r.startDiagnosticsFlow()});h.on("a2i_dpx:buyback:processBBPageState",function(){k.log("diagnostics:a2i_dpx:buyback:processBBPageState");r.buyBackState=
n.getUpdatedState()});h.on("a:accordion:buybackAccordion:withAutoDetection-accordion:select",function(a){p("#buyBackBuyNowButton").disable();e.hide("buyBackConfirmButton");r.accordionClick()});this.triggerAutoClick();this.triggerAutoClickAfterDiagnostics()},setAutoDetectDiscount:function(a,c){k.log("setAutoDetectDiscount");var e={discount:0,offerId:""};if(null!==this.buyBackState.buyBackExchangeItems&&this.buyBackState.buyBackExchangeItems!==m){for(var g=0;g<this.buyBackState.buyBackExchangeItems.length;g++){var h=
this.buyBackState.buyBackExchangeItems[g];if(a.toUpperCase()===h.header.toUpperCase()){b._deviceBrandName=h.header;for(var h=h.containedBuyBackProductNodes,p=0;p<h.length;p++)if(c.toUpperCase()===h[p].header.toUpperCase())return e.discount=h[p].buyBackProductDetails.buyBackOfferDetailsList[0].discountPrice,e.offerId=h[p].buyBackProductDetails.buyBackOfferDetailsList[0].offerId,e}}return e}},accordionClick:function(){k.log("accordionClick");"BB"!==this.buyBackState.programName?this.showADRowBeforeDiagnostics():
(b._imeiNumber=this.buyBackState.imeiNumber,b._deviceBrandName=this.buyBackState.deviceBrandName,b._deviceModelName=this.buyBackState.deviceModelName,this.showADRowAfterDiagnostics())},showADRowBeforeDiagnostics:function(){k.log("showADRowBeforeDiagnostics");e.hide("autoDiagnosticsIngress");g("#brand").text(b._deviceBrandName).removeClass("hide").addClass("show");g("#deviceBrand").val(b._deviceBrandName);g("#model").text(b._deviceModelName).removeClass("hide").addClass("show");g("#deviceModel").val(b._deviceModelName);
g("#imei").val(b._imeiNumber);var a=this.setAutoDetectDiscount(b._deviceBrandName,b._deviceModelName),c=e.getSponsoredDiscount(this.buyBackState,a.offerId,a.discount,b._imeiNumber);g("#deviceBuyBackDiscount").val(parseFloat(a.discount));g("#deviceSponsorDiscount").val(parseFloat(c));var h=e.getMaxDiagnosticsDiscount(this.buyBackState,b._imeiNumber),r;0===h||1>parseFloat(h.MaximumDiagnosticDiscount)?(r=parseFloat(a.discount)+parseFloat(c),a=parseFloat(this.buyBackState.productPrice)-(parseFloat(a.discount)+
parseFloat(c)),e.hide("autoDiagnosticsIngressRunDiagnosticText")):null!==h.DisplayableDiagnosticDiscount&&0!==parseFloat(h.DisplayableDiagnosticDiscount,10)?(r=parseFloat(a.discount)+parseFloat(c)+parseFloat(h.DisplayableDiagnosticDiscount),a=parseFloat(this.buyBackState.productPrice)-(parseFloat(a.discount)+parseFloat(c)+parseFloat(h.DisplayableDiagnosticDiscount)),g("#diagnosticsDiscountsReceivedValue").text(h.DisplayableDiagnosticDiscount),e.showInline("diagnosticsDiscountsReceivedText","diagnosticsDiscountsReceivedValue"),
g("#maxDisplayedDiscountValue").val(h.MaximumDiagnosticDiscount),e.hide("autoDiagnosticsIngressRunDiagnosticText"),e.show("autoDiagnosticsIngressRunAgainText")):(r=parseFloat(a.discount)+parseFloat(c),a=parseFloat(this.buyBackState.productPrice)-(parseFloat(a.discount)+parseFloat(c)),e.showInline("getAdditionalDiagnosticsDiscountText","getAdditionalDiscountvalue"),g("#getAdditionalDiscountvalue").text(h.MaximumDiagnosticDiscount),g("#maxDisplayedDiscountValue").val(h.MaximumDiagnosticDiscount));0!==
parseFloat(c)&&(g("#mdSponsoredDiscountValue").text(parseFloat(c)),e.showInline("mdSponsoredDiscountValue"),e.show("mdSponsoredDiscountText"));"T1"===this.buyBackState.convenienceFeeWeblabAllocation&&(this.applyChargeFee(),""!==this.buyBackState.convenienceFee?(c=Number(this.buyBackState.convenienceFee),a+=parseFloat(this.buyBackState.convenienceFee),g("#isBuyBackFee")[0]===m?this.addBuyBackFeeAsDigitalToBuyBackForm():this.setCustomKeyValueForFeeAsin(),!0===this.buyBackState.dpFeeStringTextEnabled&&
(e.show("buyBackConvenienceFeeTextSection"),g("#buyBackConvenienceFeeTextSection #convenienceFeeCharge").text(c),"T1"!==this.buyBackState.soppWeblabTreatment&&"T2"!==this.buyBackState.soppWeblabTreatment||this.buyBackState.dflEligible||(e.show("buyBackConvenienceFeeTextSectionForSOPP","mdBuyBackConvenienceFeeTextSectionForSOPP"),g("#buyBackConvenienceFeeTextSectionForSOPP #convenienceFeeCharge").text(c),g("#mdBuyBackConvenienceFeeTextSectionForSOPP #convenienceFeeCharge").text(c)))):this.resetFeeFormParams());
this.buyBackState.deviceTotalDiscount=r;n._buyBackState=this.buyBackState;e.show("autoDiagnosticsIngress");g("#mdTotalDiscountValue").text(r);e.showInline("mdTotalDiscountCurrency","mdTotalDiscountValue");g("#priceAfterBuyBackDiscount").text(e.getFormattedPrice(a));e.hide("maxBuyBackDiscountSection");e.show("priceAfterBuyBackDiscountSection");p("#buyBackBuyNowButton").enable();e.show("buyBackConfirmButton")},addBuyBackFeeAsDigitalToBuyBackForm:function(){g("#buyBackBuyNow").append('\x3cinput type\x3d"hidden" id\x3d"isBuyBackKey" name\x3d"custom-name.2.1" value\x3d"UNIQ-buyBack"\x3e\x3cinput type\x3d"hidden" id\x3d"isBuyBackFee" name\x3d"custom-value.2.1" value\x3d"BuyBackFee"\x3e')},
setCustomKeyValueForFeeAsin:function(){g("#isBuyBackKey").val("UNIQ-buyBack");g("#isBuyBackFee").val("BuyBackFee")},resetFeeFormParams:function(){g("#isBuyBackKey")[0]!==m&&g("#isBuyBackKey")[0].value!==m&&g("#isBuyBackKey").val("");g("#isBuyBackFee")[0]!==m&&g("#isBuyBackFee")[0].value!==m&&g("#isBuyBackFee").val("")},applyChargeFee:function(){var a=this.buyBackState.buyBackCategory.toLowerCase()+"_mobile";this.buyBackState.convenienceFee="";if(this.buyBackState.feeMap===m)a="BuyBack:mobile:noEntryExistsFor"+
this.buyBackState.buyBackCategory.toLowerCase()+":count",c.increment(a);else if(this.buyBackState.feeMap.map[a]===m)c.increment("BuyBack:mobile:noEntryExistsFor"+a+":count");else if(!0===this.buyBackState.feeMap.map[a].feeEnabled){this.buyBackState.convenienceFee=this.buyBackState.feeMap.map[a].price;g("#feeAsinPrice").val(this.buyBackState.convenienceFee);var b=this.buyBackState.pageLoadAsinList+"|"+this.buyBackState.feeMap.map[a].asin;g("#buyBackBuyNow #a").val(b);a=this.buyBackState.pageLoadOfferingIdList+
"|"+this.buyBackState.feeMap.map[a].offeringId;g("#buyBackBuyNow #oid").val(a);a=this.buyBackState.pageLoadQuantity+"|1";g("#buyBackBuyNow #quantity").val(a)}else c.increment("BuyBack:mobile:feeDisabledFor"+a+":count")},showADRowAfterDiagnostics:function(){k.log("showADRowAfterDiagnostics");g("#brand").text(b._deviceBrandName).removeClass("hide").addClass("show");g("#deviceBrand").val(b._deviceBrandName);g("#model").text(b._deviceModelName).removeClass("hide").addClass("show");g("#deviceModel").val(b._deviceModelName);
g("#imei").val(b._imeiNumber);if(isNaN(this.buyBackState.deviceSponsoredDiscount)||null===this.buyBackState.deviceSponsoredDiscount||""===this.buyBackState.deviceSponsoredDiscount)this.buyBackState.deviceSponsoredDiscount="0.0";var a=parseFloat(this.buyBackState.deviceBuyBackDiscount,10)+parseFloat(this.buyBackState.deviceSponsoredDiscount,10)+parseFloat(this.buyBackState.deviceDiagnosticsDiscount,10);this.buyBackState.deviceTotalDiscount=a;n._buyBackState=this.buyBackState;g("#mdTotalDiscountValue").text(a);
e.showInline("mdTotalDiscountCurrency","mdTotalDiscountValue");g("#diagnosticsDiscountsReceivedValue").text(this.buyBackState.deviceDiagnosticsDiscount);e.showInline("diagnosticsDiscountsReceivedText","diagnosticsDiscountsReceivedValue");a=parseFloat(this.buyBackState.devicePriceAfterDiagnostics,10);if("T1"===this.buyBackState.convenienceFeeWeblabAllocation)if(this.applyChargeFee(),""!==this.buyBackState.convenienceFee){var c=Number(this.buyBackState.convenienceFee),a=a+parseFloat(this.buyBackState.convenienceFee);
g("#isBuyBackFee")[0]===m?this.addBuyBackFeeAsDigitalToBuyBackForm():this.setCustomKeyValueForFeeAsin();!0===this.buyBackState.dpFeeStringTextEnabled&&(e.show("buyBackConvenienceFeeTextSection"),g("#buyBackConvenienceFeeTextSection #convenienceFeeCharge").text(c),"T1"!==this.buyBackState.soppWeblabTreatment&&"T2"!==this.buyBackState.soppWeblabTreatment||this.buyBackState.dflEligible||(e.show("buyBackConvenienceFeeTextSectionForSOPP","mdBuyBackConvenienceFeeTextSectionForSOPP"),g("#buyBackConvenienceFeeTextSectionForSOPP #convenienceFeeCharge").text(c),
g("#mdBuyBackConvenienceFeeTextSectionForSOPP #convenienceFeeCharge").text(c)))}else this.resetFeeFormParams();g("#priceAfterBuyBackDiscount").text(e.getFormattedPrice(a));e.hide("maxBuyBackDiscountSection");e.show("priceAfterBuyBackDiscountSection");a=e.getMaxDiagnosticsDiscount(this.buyBackState,b._imeiNumber);g("#maxDisplayedDiscountValue").val(a.MaximumDiagnosticDiscount);e.hide("autoDiagnosticsIngressRunDiagnosticText");e.show("autoDiagnosticsIngressRunAgainText");p("#buyBackBuyNowButton").enable();
e.show("buyBackConfirmButton")}}});"use strict";q.when("A","ready").register("BBPageState",function(h){h.on("a:pageUpdate",function(){h.trigger("a2i_dpx:buyback:processBBPageState")});return{_buyBackState:null,callBBPageState:!1,init:function(){this._buyBackState=h.state("buyBackPageState")},get:function(){null===this._buyBackState&&this.init();return this._buyBackState},getUpdatedState:function(){var p=h.$("#buyBackAccordionRow").find("script[type\x3da-state]").html();return p?h.$.parseJSON(p):h.state("buyBackPageState")}}});
q.when("A","ready").register("buyBackPageStateStatic",function(h){});"use strict";q.when("A","ready").register("DiagnosticsState",function(h){return{_isPhoneRooted:null,_isAutoDetectSuccessfull:null,_clickedAlready:!1,_ranAutoDetection:!1,_ranPhoneRooted:!1,_imeiNumber:"",_deviceBrandName:"",_deviceModelName:"",_deviceModelId:"",_amazonAppVersion:"",_androidVersion:"",_hiddenRowHTML:"",_lastHiddenElem:null,_shouldRunAutoDetect:!0}});"use strict";q.when("A").register("Logger",function(h){return{_enable:!1,
log:function(h){this._enable&&console.log(h)}}});"use strict";q.when("A","BBPageState","buyBackPageStateStatic").execute(function(h,p){function e(){b(k).unbind("click").click(function(){n||(n=1,b("#bb-warranty-container").append(b(a+" #addToCart #abbWrapper")))});b(a).unbind("click").click(function(){n&&(n=0,1===g.length&&f.before(b("#bb-warranty-container #abbWrapper")))})}function c(){0<b("#withExchangeOffer-accordion").length?(k="#withExchangeOffer-accordion",a="#withoutExchangeOffer-accordion",
g=b(a+" #addToCart").children(".a-section")):(k="#buyBackAccordionRow",a="#newAccordionRow",g=b(a+" #addToCart  #desktop_qualifiedBuyBox").children(".a-section"));f=b(a+" #addToCart #abbWrapper").next()}var n=0,b=h.$,k="",a="",g="",f=null;p.init();p=p.get();p!==m&&"T1"===p.warrantyWeblabTreatment&&!0===p.hasValidBuyBackOffers&&(c(),e(),h.on("a:pageUpdate",function(){n=0;c();e()}))});q.when("A").execute(function(h){function p(){e("#buyBackBuyNowButton").unbind("click").click(function(){var c=e("#buyBackBuyNow"),
h=c.find('input[name\x3d"itemCount"]');0===h.length?c.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"14"\x3e'):h[0].value=14})}var e=h.$;p();h.on("a2i_dpx:buyback:processBBPageState",function(){p()})});"use strict";q.when("A","ready").register("bbg-atc-handler-component",function(h){var p=!1;return{setBbgAddToCartApiCalled:function(e){p=e},isBbgAddToCartApiCalled:function(){return p}}});"use strict";q.when("A","a-checkbox","a-modal","BBPageState","bbMetric","buyBackPageStateStatic").execute(function(h,
p,e,c,n){function b(b,e){b=a("form\x3d[id\x3d"+e+"]");if(0===b.find('input[class^\x3d"bbgInputData"]').length){g=c.getUpdatedState();var f=g.bbgAsin,h=g.bbgAsinOfferingId,k=g.bbgOfferId,p=k+"-"+(new Date).getTime(),m=b.find("input[name^\x3d'offeringID']").length+1,f='\x3cinput class\x3d"bbgInputData-'+e+'" type\x3d"hidden" id\x3d"asin.'+m+'" name\x3d"asin.'+m+'" value\x3d"'+f+'"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" type\x3d"hidden" id\x3d"quantity.'+m+'" name\x3d"quantity.'+m+'" value\x3d"1"\x3e\x3cinput class\x3d"bbgInputData-'+
e+'" type\x3d"hidden" id\x3d"offeringID.'+m+'" name\x3d"offeringID.'+m+'" value\x3d"'+h+'"\x3e',h=m+1,h='\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-name.'+h+'.1" name\x3d"custom-name.'+h+'.1" value\x3d"itemAssoc" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-value.'+h+'.1" name\x3d"custom-value.'+h+'.1" value\x3d"'+p+'" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-name.'+h+'.2" name\x3d"custom-name.'+h+'.2" value\x3d"itemAssocType" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+
e+'" id\x3d"custom-value.'+h+'.2" name\x3d"custom-value.'+h+'.2" value\x3d"BuyBackGuarantee" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-name.'+h+'.3" name\x3d"custom-name.'+h+'.3" value\x3d"bbgOfferingId" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-value.'+h+'.3" name\x3d"custom-value.'+h+'.3" value\x3d"'+k+'" type\x3d"hidden"\x3e',n=b.find("input[name^\x3d'custom-name.1.']").length+1;e='\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-name.1.'+
n+'" name\x3d"custom-name.1.'+n+'" value\x3d"itemAssoc" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-value.1.'+n+'" name\x3d"custom-value.1.'+n++ +'" value\x3d"'+p+'" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-name.1.'+n+'" name\x3d"custom-name.1.'+n+'" value\x3d"UNIQ-itemAssoc" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-value.1.'+n+'" name\x3d"custom-value.1.'+n++ +'" value\x3d"'+p+'" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+
e+'" id\x3d"custom-name.1.'+n+'" name\x3d"custom-name.1.'+n+'" value\x3d"itemAssocType" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-value.1.'+n+'" name\x3d"custom-value.1.'+n++ +'" value\x3d"BuyBackGuarantee" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-name.1.'+n+'" name\x3d"custom-name.1.'+n+'" value\x3d"bbgOfferingId" type\x3d"hidden"\x3e\x3cinput class\x3d"bbgInputData-'+e+'" id\x3d"custom-value.1.'+n+'" name\x3d"custom-value.1.'+n++ +
'" value\x3d"'+k+'" type\x3d"hidden"\x3e';e=f+h+e;k=b.find('input[name\x3d"itemCount"]');0===k.length?e+='\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+m+'"\x3e':k.value+=1;b.append(e)}}function k(){g=c.getUpdatedState();!0===g.isbbgOfferAvailable&&(a("[id^\x3d'bbg-checkbox-']").unbind("click").click(function(c){this.checked?b(c,this.value):a(".bbgInputData-"+this.value).remove()}).each(function(){this.checked?b(event,this.value):a(".bbgInputData-"+this.value).remove()}),a("[id^\x3d'bbg-addButton-']").unbind("click").click(function(c){b(c,
this.value);var f=p("#bbg-checkbox-"+this.value),g=e.get(a("#bbg-featureDiv-"+this.value));f.check();null!==g&&g.hide();c.preventDefault()}),a("[id^\x3d'bbg-skipButton-']").unbind("click").click(function(b){a(".bbgInputData-"+this.value).remove();var c=p("#bbg-checkbox-"+this.value),f=e.get(a("#bbg-featureDiv-"+this.value));c.uncheck();null!==f&&f.hide();b.preventDefault()}),f.forEach(function(b){a(document).undelegate(b,"click.bbg");!0===g.isbbgOfferAvailable&&a(document).delegate(b,"click.bbg",
{form:b},q)},f))}var a=h.$;c.init();var g=c.get(),f=["#add-to-cart-button","#buy-now-button","#buyBackBuyNowButton"],q=function(b){a(b.data.form).find('input[class^\x3d"bbgInputData"]')&&(n.increment("BuyBackGuarantee:desktop:bbgAdded:count"),n.increment("BuyBackGuarantee:desktop:bbgAdded:count"+b.data.form))};g!==m&&(h.on("a2i_dpx:buyback:processBBPageState",function(){k()}),k())});"use strict";q.when("A","a-button","BBPageState","bbMetric","buyback-util","buyBackPageStateStatic").register("gep-util",
function(h,m,e,c,n){var b=h.$;e.init();h={bbPageState:e.get(),isGEPEligibleCustomer:function(b){return"undefined"===typeof b?this.bbPageState.gepEligibleCustomer:b.gepEligibleCustomer},showGEPInfoDiv:function(b){b.selectedBuyBackOfferData.gepEligibleBrandModel&&(0==b.selectedBuyBackOfferData.discountPrice?this.showGEPDivsWhenRegularExchangeNotPresent():(n.hide("buyBackVerifyIMEIText","buyBackGEPIMEISuccessAlert","buyBackGEPNotEligibleAlert","buyBackGEPSuccessNotes"),n.show("buyBackGEPIMEIInfoAlert"),
c.increment("BuyBack::gepInfoShown:count"),c.increment("BuyBack:GEP:gepEligibleBrandModelSelected:count")))},showGEPDivsWhenRegularExchangeNotPresent:function(){n.hide("priceAfterBuyBackDiscountSection","buyBackOfferAppliedSuccess","buyBackExchangeMightBeEligibleText","buyBackCollectOldProductDetailsText","buyBackVerifyIMEIText","buyBackGEPIMEISuccessAlert","buyBackGEPNotEligibleAlert","buyBackGEPSuccessNotes");n.show("maxBuyBackDiscountSection","buyBackGEPIMEIInfoAlert","buyBackDetailsVerifyText");
c.increment("BuyBack:GEP:brandModelshownWhenExchangeOfferNotPresent:count");c.increment("BuyBack:GEP:gepEligibleBrandModelSelected:count")},showGEPDivPostIMEIValidation:function(e){c.increment("BuyBack:GEP:IMEIVerifiedWithCashify:count");e.discountAppliedText?e.gepSuccessNoteText?(b("#buyBackGEPIMEISuccessAlert span").html(e.discountAppliedText),b("#buyBackGEPSuccessNotes span").html(e.gepSuccessNoteText),n.show("buyBackGEPIMEISuccessAlert","buyBackGEPSuccessNotes"),n.hide("buyBackOfferAppliedSuccess",
"buyBackGEPNotEligibleAlert"),c.increment("BuyBack:GEP:successNoteShown:count")):e.gepFailureNoteText?(c.increment("BuyBack:GEP:gepNotEligible:count"),b("#buyBackGEPNotEligibleAlert").html(e.gepFailureNoteText),n.hide("buyBackGEPIMEISuccessAlert"),n.show("buyBackGEPNotEligibleAlert","buyBackOfferAppliedSuccess")):(c.increment("BuyBack:GEP:EmptySucessAndFailureNote:count"),n.hide("buyBackGEPIMEISuccessAlert","buyBackGEPNotEligibleAlert"),n.show("buyBackOfferAppliedSuccess")):(n.hide("buyBackIMEISection",
"buyBackOfferAppliedSuccessText","buyBackSponsoredDiscountText"),n.show("buyBackExchangeMightBeEligibleText","buyBackOfferAppliedSuccess"),m("#buyBackBuyNowButton").disable(),c.increment("BuyBack:GEP:gepNotEligibleWhenRegularExchangeNotPresent:count"))}};0==b("#buyBackExchangeMightBeEligibleText").length&&0<b("#buyBackOfferAppliedSuccess").length&&b("#buyBackOfferAppliedSuccess").append('\x3cspan id\x3d"buyBackExchangeMightBeEligibleText" class\x3d"a-size-mini hide"\x3e\x3cdiv class\x3d"a-box a-alert-inline a-alert-inline-error a-spacing-top-mini"\x3e\x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\x3cdiv class\x3d"a-alert-content"\x3e\x3cspan class\x3d"a-size-base"\x3eYour device is not eligible for exchange. Select a different model.\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/span\x3e');
return h});"use strict";q.when("A","bbMetric","ready").register("buyback-suppress-addToCart",function(h,m){var e=h.$;return{hide:function(){e("#addToCart_feature_div").removeClass("show").addClass("hide");m.increment("AddToCartHandler:button:hide:count")},show:function(){e("#addToCart_feature_div").removeClass("hide").addClass("show");m.increment("AddToCartHandler:button:show:count")}}})});
/* ******** */
(function(m){var q=window.AmazonUIPageJS||window.P,w=q._namespace||q.attributeErrors,b=w?w("DetailPageAlohaAssets",""):q;b.guardFatal?b.guardFatal(m)(b,window):b.execute(function(){m(b,window)})})(function(m,q,w){m.when("A","a-modal","a-checkbox","aloha-simplebundle-common","ready").execute(function(b,l,e,c){function d(){b.declarative("show-review-tab","click",function(c){b.$(c.$target).closest(a.AUI_PAGE_ROOT).find(".popoverReviewsTab").click()});b.declarative("add-to-cart","click",function(c){b.$(a.SB_ROOT+
" "+a.SB_BUYBOX_ITEM_CHECKBOX+" "+a.INPUT_TYPE_CHECKBOX).filter(function(){return b.$(this).data("asin")===c.data.asin}).prop("checked",!0).change();b.$("[id^\x3dpopover-simpleBundle-]").each(function(){var a=l.get(b.$(this));a.isActive()&&a.hide()})});b.declarative("focus-image","mouseenter",function(b){var c=b.$target,d=c.parents(a.AUI_PAGE_ROOT);b=b.data;d.find("#productImageMain-"+b.asin).attr("src",b.imageUrl);d.find(".thumbnail-group").removeClass("a-button-selected");d.find("#"+c.prop("name")).addClass("a-button-selected")})}
var a={BUYBOX_ACCORDION:"#buyBoxAccordion",ADD_TO_CART_FORM:"#addToCart, #buyBackBuyNow",ADD_TO_CART_ATTACH_BUTTON:"#add-to-cart-button.attach-dss-atc:button",SESSION_ID:"#session-id",OFFER_LISTING_ID:"#offerListingID, #oid",AUI_MODAL_SCROLLER:".a-modal-scroller",AUI_PAGE_ROOT:"#a-page",INPUT_TYPE_CHECKBOX:"input[type\x3d'checkbox']",BASE_PRODUCT_PRICE:"#base-product-price",BASE_PRODUCT_PRICE_DATA:"base-product-price",SB_ROOT:".showBundleAsins.simpleBundleFeatureContainer",SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX:".simple-bundle-item-expand-header-",
SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX:".simple-bundle-item-expander-content-",SB_EXPANDED_MODAL_LINK:".simple-bundle-buybox-expanded-modal-link",SB_EXPANDED_MODAL_ITEM_LINK_PREFIX:".simple-bundle-item-link-",SB_ACCESSORY_ITEM_LINK_PREFIX:".popover-simpleBundle-link-",SB_BUYBOX_ITEM_CHECKBOX:".simple-bundle-buybox-item-checkbox",SB_BUYBOX_CHECKBOX_PREFIX:".simple-bundle-item-",SB_EXPANDED_CHECKBOX_PREFIX:".simple-bundle-modal-item-",SB_EXPANDER_TITLE:".aloha-simple-bundle-expand-header-title"},
k=!1;e=b.debounce(function(){var e=b.$(a.SB_ROOT);if(e.length){var f=b.$(a.ADD_TO_CART_FORM),l=f.find(":submit").length&&f.find(a.OFFER_LISTING_ID).val(),q=b.$(a.ADD_TO_CART_ATTACH_BUTTON),m=q.length;if(l||m){d();var u=c.getSimpleBundlePageState()||{},x=u.expandedBuyboxEnabled,y=u.selectionMode||"SINGLE",n=u.items||[],A=[],D=b.$(a.SESSION_ID).val(),B=e.find(a.SB_EXPANDED_MODAL_LINK),C,r={baseAsin:u.baseAsin,baseItemPrice:b.$(a.BASE_PRODUCT_PRICE).data(a.BASE_PRODUCT_PRICE_DATA),clientType:"aloha-simplebundle-desktop",
currencyOfPreferenceSupported:u.currencyOfPreferenceSupported||!1},v=c.createMetricsLogger(r);k||(k=!0,b.defer(function(){v.logNexusImpression(n);v.logImpressionRefTag()}));B.click(function(b){b.originalEvent&&v.logExpandedLink()});n.forEach(function(g,d){function p(){var g=!1;f.click(function(){g=!g});e.find(a.SB_EXPANDED_MODAL_ITEM_LINK_PREFIX+d).click(function(){g||f.click();B.click();C=C||b.$(a.AUI_MODAL_SCROLLER);C.scrollTop(f.offset().top-C.offset().top+C.scrollTop())})}function t(){var c=e.find(a.SB_EXPANDED_MODAL_EXPANDER_CONTENT_PREFIX+
d),t="/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?asin\x3d"+g.asin+"\x26marketplaceId\x3d"+u.marketPlaceId+"\x26offerId\x3d"+g.offerListingId+"\x26activeTab\x3d0",p="a:expander:simple-bundle-item-expander-"+d+":toggle",n=b.once(function(){c.load(t,null,function(a,g,d){b.$.trim(c.html())?(c.find(".a-span-last \x3e .a-spacing-top-base").remove(),c.find(".popover-add-to-cart-button").remove(),a=c.find("#a-page \x3e div \x3e div.a-row"),g=c.find(".popover-in-stock"),g.remove(),g.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),
a.append(g),g=c.find(".popover-ship-sold-by"),g.remove(),g.addClass("aloha-simple-bundle-modal-detailed-info-header-row-text"),a.append(g),g=c.find(".popover-retail-domain"),g.remove(),a.append(g),a=c.find("#a-page \x3e div \x3e div.a-column.a-span9"),a.removeClass("a-span9"),a.addClass("a-span12")):c.text(u.ajaxFailMsg)})}),B=p+":expand";b.off(B);b.on(B,function(g){v.logItemLink(d);f.find(a.SB_EXPANDER_TITLE).removeClass("aloha-simple-bundle-expand-header-title-truncate");b.$.trim(c.html())||n()});
p+=":collapse";b.off(p);b.on(p,function(b){f.find(a.SB_EXPANDER_TITLE).addClass("aloha-simple-bundle-expand-header-title-truncate")})}var f=e.find(a.SB_EXPANDED_MODAL_EXPANDER_HEADER_PREFIX+d);if(x)p(),t();else{var n=e.find(a.SB_ACCESSORY_ITEM_LINK_PREFIX+d);n.unbind("click.MiniDpClickHandler");n.bind("click.MiniDpClickHandler",function(){v.logItemLink(d);v.logNexusOpenMiniDP(d,g);v.logMiniDPRefTag(d)})}c.setupCheckboxes(A,d,g,u.maxBuyboxItemsDesktop,a.SB_BUYBOX_CHECKBOX_PREFIX+d+" "+a.INPUT_TYPE_CHECKBOX,
a.SB_EXPANDED_CHECKBOX_PREFIX+d+" "+a.INPUT_TYPE_CHECKBOX,a.SB_BUYBOX_CHECKBOX_PREFIX+d,a.SB_EXPANDED_CHECKBOX_PREFIX+d,y)});r=b.$(a.BUYBOX_ACCORDION);r.length?r.children().each(function(){f=b.$(this).find(a.ADD_TO_CART_FORM);var g=f.find(a.ADD_TO_CART_ATTACH_BUTTON),d=g.length,e=f.find(a.SB_ROOT).length,t=f.find(":submit").length&&f.find(a.OFFER_LISTING_ID).val();e&&t&&c.setupAddToCart(f,A,n,v,D,x);d&&c.setupAddToCartForButton(g,A,n,v,D,x,f)}):(l&&c.setupAddToCart(f,A,n,v,D,x),m&&c.setupAddToCartForButton(q,
A,n,v,D,x,f))}else e.hide()}},200);e();b.on("a:pageUpdate",e)});"use strict";m.when("A","a-checkbox","aloha-uatc","aloha-buy-now-integration","aloha-buybox-form-util","aloha-buy-back-integration","abb-buynow-api").register("aloha-simplebundle-common",function(b,l,e,c,d,a,k){function h(a,d){var c=b.$(a);c.change(function(){c.prop("checked",this.checked);var b={asin:c.data("asin"),offeringID:c.data("offeringID"),quantity:c.data("quantity")};this.checked?(k.addFormParams("#buyNow",b),k.addFormParams("#buyBackBuyNow",
b),k.addFormParams("#buyNowCheckout",b)):(k.removeFormParams("#buyNow",b),k.removeFormParams("#buyBackBuyNow",b),k.removeFormParams("#buyNowCheckout",b))});var e=b.$(d);e.length||(e=c);return{$element:c,$container:e,api:l(a),show:function(){e.hasClass(y.AUI_HIDDEN)&&e.removeClass(y.AUI_HIDDEN);e.show()},hide:function(){e.hasClass(y.AUI_HIDDEN)||e.addClass(y.AUI_HIDDEN)},isVisible:function(){return!e.hasClass(y.AUI_HIDDEN)}}}function f(b,a,c){a.forEach(function(a){b.addItem(a.asin,a.offerListingId,
a.quantity);c.logCheckboxSelected(a.index,a.quantity);c.logAddToCartRefTag(a.index)})}function z(b,a,c){var d=[],e=[];a.forEach(function(a,f){var g=b[f];a.api.isChecked()?d.push({asin:g.asin,offerListingId:g.offerListingId,ourPrice:g.ourPrice,ourPriceAmount:g.ourPriceAmount,ourPriceSymbol:g.ourPriceSymbol,ourPriceCode:g.ourPriceCode,index:f,quantity:c}):e.push({asin:g.asin,ourPrice:g.ourPrice,ourPriceAmount:g.ourPriceAmount,ourPriceSymbol:g.ourPriceSymbol,ourPriceCode:g.ourPriceCode,index:f,isVisible:a.isVisible()})});
return{selectedLineItems:d,unselectedItems:e}}var w=/[^\d,\.]/g,E=/,/g,u=/\./g,x=/(^\D+|\D+$)/,y={AUI_HIDDEN:"aok-hidden"};return{createMetricsLogger:function(a){function c(a,b){q.ue&&q.ue.count&&q.ue.count("aloha-simplebundle-"+a,b)}function d(){var b;b=a.currencyOfPreferenceSupported?{priceFormatted:a.baseItemPrice,priceDecimal:null,currencySymbol:null}:k(a.baseItemPrice);return{baseAsin:a.baseAsin,baseItemPrice:b.priceFormatted,baseItemCurrencySymbol:b.currencySymbol,baseItemPriceDecimal:b.priceDecimal,
clientType:a.clientType,feature:"abb"}}function e(a,b){q.ue&&q.ue.event&&q.ue.event(a,"atch",b)}function f(a){b.ajax("/gp/product/ajax-handlers/reftag.html?ref_\x3d"+a,{method:"get"})}function h(b){return a.currencyOfPreferenceSupported?{priceFormatted:b.ourPrice,priceDecimal:parseFloat(b.ourPriceAmount)||null,currencySymbol:b.ourPriceSymbol}:k(b.ourPrice)}function k(a){a=a||"";var b=a.lastIndexOf(","),c=a.lastIndexOf("."),d;b>c?(c=u,d=E):(c=E,d=u);(b=a.match(x))&&(b=b[0].trim());c=a.replace(w,"").replace(c,
"").replace(d,".");c=parseFloat(c);return{priceFormatted:a,currencySymbol:b,priceDecimal:c}}b.defer(function(){c("view",1)});return{logAddToCart:function(a){c("addtocart",a)},logExpandedLink:function(){c("buybox-expanded-link",1)},logCheckboxSelected:function(a,b){c("checkbox-"+(a+1),b)},logItemLink:function(a){c("link-"+(a+1),1)},logImpressionRefTag:function(){f("dp_atch_abb_i")},logAddToCartRefTag:function(a){f("dp_atch_abb_atc_"+(a+1))},logMiniDPRefTag:function(a){f("dp_atch_abb_smdp_"+(a+1))},
logNexusImpression:function(a){var b=d();b.accessories=a.map(function(a,b){var c=h(a);return{asin:a.asin,displayPosition:b+1,price:c.priceFormatted,currencySymbol:c.currencySymbol,priceDecimal:c.priceDecimal}});e(b,"attach.ABBImpression.3")},logNexusAddBaseToCart:function(a,b,c){var f=d();f.baseQuantity=Number(c);f.accessoriesAdded=a.map(function(a){var b=h(a);return{asin:a.asin,displayPosition:a.index+1,quantity:Number(a.quantity),price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});
f.accessoriesNotAdded=b.map(function(a){var b=h(a);return{asin:a.asin,displayPosition:a.index+1,price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});e(f,"attach.ABBAddBaseToCart.7")},logNexusOpenMiniDP:function(a,b){var c=h(b),f=d();f.accessoryAsin=b.asin;f.accessoryDisplayPosition=Number(a)+1;f.accessoryPrice=c.priceFormatted;f.accessoryItemCurrencySymbol=c.currencySymbol;f.accessoryItemPriceDecimal=c.priceDecimal;e(f,"attach.ABBShowMiniDP.3")}}},getSimpleBundlePageState:function(){var a=
b.$(".simpleBundleJavascriptParameters").find("script").html();return b.parseJSON(a)},getCheckboxCollectionObject:h,setupAddToCart:function(d,h,k,l,m){function r(d,p){if(v){var t=b.$(d.currentTarget);if(c.isBuyNow(t)){var n=g.find("*[name\x3d'quantity']").val()||1,r=z(k,h,n);c.checkoutWith(r.selectedLineItems,t)}else if(a.isBuyBack(t))n=g.find("*[name\x3d'quantity']").val()||1,r=z(k,h,n),a.checkoutWith(r.selectedLineItems,t);else return}var u=e.createAddToCartRequest(m,function(){p()},function(){q.ueLogError&&
q.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"});p()}),n=g.find("*[name\x3d'quantity']").val()||1,r=z(k,h,n);f(u,r.selectedLineItems,l);t=r.unselectedItems.filter(function(a){return a.isVisible});l.logNexusAddBaseToCart(r.selectedLineItems,t,n);n=u.count();0!==n&&(t=b.$(d.currentTarget),c.isBuyNow(t)?c.checkoutWith(r.selectedLineItems,t):a.isBuyBack(t)?a.checkoutWith(r.selectedLineItems,
t):(v=!0,d.preventDefault(),l.logAddToCart(n),u.call()))}var v=!1,g=d;d.unbind("submit.SimpleBundleSubmitHandler");d.bind("submit.SimpleBundleSubmitHandler",function(a){var c=b.$(this);r(a,function(){c.submit()})});d.find(":submit").unbind("click.SBB");d.find(":submit").bind("click.SBB",function(a){var c=b.$(this),e=c.closest(".a-accordion-row-container");e.length&&(g=e,"addToCart"!==d.attr("id")&&"buyNow"!==d.attr("id")||d.unbind("submit.SimpleBundleSubmitHandler"),r(a,function(){c.click()}))})},
setupAddToCartForDeclarative:function(a,b,c,d,h,k){a.unbind("click.SimpleBundleClickHandler");a.bind("click.SimpleBundleClickHandler",function(a){a=e.createAddToCartRequest(h,function(){m.now("attach-external-atc-interceptor").execute(function(a){a&&l.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})})},function(){q.ueLogError&&q.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"})});
var g=k.find("*[name\x3d'quantity']").val()||1,l=z(c,b,g);f(a,l.selectedLineItems,d);var n=l.unselectedItems.filter(function(a){return a.isVisible});d.logNexusAddBaseToCart(l.selectedLineItems,n,g);if(g=a.count())d.logAddToCart(g),a.call()})},setupCheckboxes:function(a,c,d,e,f,k,l,g,m){var p=h(f,l);a.push(p);p.api.enable();p.$element.data("asin",d.asin);p.$element.data("offeringID",d.offerListingId);p.$element.data("quantity",1);b.on("a:dropdown:mobileQuantityDropDown:select",function(a){p.$element.data("quantity",
a.value)});b.on("a2idpx:buyback:discount-price",function(a){p.$element.change()});"SINGLE"===m&&p.$element.change(function(){p.api.isChecked()&&a.forEach(function(a,b){c!==b&&a.api.uncheck()})})},setupAddToCartForButton:function(a,c,e,f,h,k){function l(){var a=g.find("*[name\x3d'quantity']").val()||1,b=z(e,c,a);d.addItems(k,b.selectedLineItems,f);var h=b.unselectedItems.filter(function(a){return a.isVisible});m.now("attach-external-atc-interceptor").execute(function(a){a&&b.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})});
f.logNexusAddBaseToCart(b.selectedLineItems,h,a);f.logAddToCart(b.selectedLineItems.length)}var g=k;a.unbind("click.button.SBB");a.bind("click.button.SBB",function(){var a=b.$(this).closest(".a-accordion-row-container");a.length&&(g=a);l()})}}});m.when("A","ready").register("abb-buynow-api",function(b){var l=function(e){return b.$(e+" \x3e input[name\x3dofferingID]")};return{addFormParams:function(e,c){var d=b.$(e+" \x3e input[name\x3dasin]"),a=l(e);e=b.$(e+" \x3e input[name\x3dquantity]");if((d=
b.$(d))&&0!==d.length&&d.val()&&-1===d.val().indexOf(c.asin)&&b.$(e)&&0!==b.$(e).length&&b.$(e).val()&&b.$(a)&&0!==b.$(a).length&&b.$(a).val()){var k=d.val()+"|"+c.asin,h=b.$(a).val()+"|"+c.offeringID;c=b.$(e).val()+"|"+c.quantity;d.val(k);b.$(a).val(h);b.$(e).val(c)}},removeFormParams:function(e,c){var d=b.$(e+" \x3e input[name\x3dasin]"),a=l(e);e=b.$(e+" \x3e input[name\x3dquantity]");if((d=b.$(d))&&0!==d.length&&d.val()&&-1!==d.val().indexOf(c.asin)&&b.$(e)&&0!==b.$(e).length&&b.$(e).val()&&b.$(a)&&
0!==b.$(a).length&&b.$(a).val()){var k=d.val().split("|");c=k.indexOf(c.asin);k.splice(c,1);d.val(k.join("|"));d=b.$(a).val().split("|");d.splice(c,1);b.$(a).val(d.join("|"));a=b.$(e).val().split("|");a.splice(c,1);b.$(e).val(a.join("|"))}}}});"use strict";m.when("A").register("aloha-uatc",function(b){function l(e,c,d,a,k){var h=0;k=k||5E3;a=a||d;var f={clientName:"AmazonWireless"};f.verificationSessionID=e;return{count:function(){return h},call:function(){h&&b.post("/gp/add-to-cart/json",{timeout:k,
params:f,success:c,error:d,abort:a})},addItem:function(a,b,c){f["ASIN."+h]=a;f["offerListingID."+h]=b;f["quantity."+h]=c||1;h++}}}return{createAddToCartRequest:l,createSingleFinalCallbackAddToCartRequest:function(b,c){return l(b,c,c,c)}}});"use strict";m.when("A").register("aloha-buy-now-integration",function(b){var l=b.$,e={};m.when("turbo-checkout-buy-now-integration").execute(function(b){e=b});return{isBuyNow:function(b){return 0===Object.entries(e).length&&e.constructor===Object?"buy-now-button"===
b.attr("id")||"addToCart"===b.attr("id"):"function"===typeof e.isBuyNow&&e.isBuyNow(b)||"buy-now-button"===b.attr("id")},checkoutWith:function(b,d){if(0===Object.entries(e).length&&e.constructor===Object){var a;for(a=1;0<d.find('input[name\x3d"asin.'+a+'"]').length||0<d.find('input[name\x3d"offeringID.'+a+'"]').length;)a++;for(var k=[],h=0;h<b.length;h++){var f=b[h];if(f!==w&&f.asin&&f.offerListingId){var m=a,f=[l("\x3cinput /\x3e",{type:"hidden",name:"asin."+m,value:f.asin}),l("\x3cinput /\x3e",
{type:"hidden",name:"offeringID."+m,value:f.offerListingId}),l("\x3cinput /\x3e",{type:"hidden",name:"quantity."+m,value:f.quantity||1})];Array.prototype.push.apply(k,f);a++}else logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',f)}b=d.find('input[name\x3d"itemCount"]');1===b.length?b.val(a):d.append(l("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:a}));d.append.apply(d,k)}else return e.checkoutWith(b,d)}}});"use strict";
m.when("A").register("aloha-buy-back-integration",function(b){var l=b.$;return{isBuyBack:function(b){return"buyBackBuyNow"===b.attr("id")},checkoutWith:function(b,c){var d;for(d=1;0<c.find('input[name\x3d"asin.'+d+'"]').length||0<c.find('input[name\x3d"offeringID.'+d+'"]').length;)d++;for(var a=[],k=0;k<b.length;k++){var h=b[k];if(h!==w&&h.asin&&h.offerListingId){var f=d,h=[l("\x3cinput /\x3e",{type:"hidden",name:"asin."+f,value:h.asin}),l("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+f,value:h.offerListingId}),
l("\x3cinput /\x3e",{type:"hidden",name:"quantity."+f,value:h.quantity||1})];Array.prototype.push.apply(a,h);d++}else logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',h)}b=c.find('input[name\x3d"itemCount"]');1===b.length?b.val(d):c.append(l("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:d}));c.append.apply(c,a)}}});"use strict";m.when("A").register("aloha-buybox-form-util",function(b){function l(b){for(var a=
2;0<b.find('input[name\x3d"asin.'+a+'"]').length||0<b.find('input[name\x3d"offeringID.'+a+'"]').length;)a++;return a}function e(c,a){return[b.$("\x3cinput /\x3e",{type:"hidden",name:"asin."+a,value:c.asin,class:"aloha-accessory-form-input"}),b.$("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+a,value:c.offerListingId,class:"aloha-accessory-form-input"}),b.$("\x3cinput /\x3e",{type:"hidden",name:"quantity."+a,value:c.quantity||1,class:"aloha-accessory-form-input"})]}var c=[];b.on("aloha:detailPage:reappear",
function(){c=[];b.$(".aloha-accessory-form-input").remove()});return{addItems:function(b,a,k){var h=l(b);a.forEach(function(a){if(a!==w&&a.asin&&a.offerListingId){var l=e(a,h);l.forEach(function(a){b.append(a)});c.push(l);h++;k&&(k.logCheckboxSelected(a.index,a.quantity),k.logAddToCartRefTag(a.index))}});a=b.find('input[name\x3d"itemCount"]');0===a.length?b.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+h+'"\x3e'):a[0].value=h}}})});
/* ******** */
